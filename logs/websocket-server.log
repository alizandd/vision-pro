[Server] Vision Pro WebSocket Server starting...
[Server] ========================================
[Server] Vision Pro Server Started
[Server] ========================================
[Server] WebSocket: ws://0.0.0.0:8080
[Server] Video API: http://0.0.0.0:8080/api/videos
[Server] Videos Folder: /Users/alizand/Herd/vision-pro/server/videos
[Server] Health Check: http://0.0.0.0:8080/health
[Server] Device List: http://0.0.0.0:8080/devices
[Server] ========================================
[Server] Available videos: 4
[Server]   1. BigBuckBunny.mp4
[Server]   2. VRCarRender001.mp4
[Server]   3. output.mp4
[Server]   4. output_fixed.mp4
[Server] ========================================
[Server] New connection from 192.168.70.131
[Server] Received message: {"type":"register","deviceId":"controller-7rod1tghq","deviceName":"Web Orchestrator","deviceType":"controller"}
[Server] Controller registered: Web Orchestrator
[Server] Video list requested: 4 videos found
[Server] New connection from 127.0.0.1
[Server] Received message: {"deviceId":"776ADE85-EDEA-4EE1-9D01-7ED54A7448F5","deviceName":"Vision Pro","deviceType":"visionpro","type":"register"}
[Server] âœ… Vision Pro registered: Vision Pro (776ADE85-EDEA-4EE1-9D01-7ED54A7448F5)
[Server] Total Vision Pro devices: 1
[Server] Broadcasting to 1 controllers: {"type":"deviceConnected","deviceId":"776ADE85-EDEA-4EE1-9D01-7ED54A7448F5","deviceName":"Vision Pro"}
[Server] Received message: {"deviceId":"776ADE85-EDEA-4EE1-9D01-7ED54A7448F5","type":"localVideos","videos":[{"modified":791591931.6559595,"size":158008374,"id":"B0949B17-15EF-484B-A74E-315B412A8A9D","extension":"mp4","url":"file:///Users/alizand/Library/Developer/CoreSimulator/Devices/258F4903-3335-4BD3-AB9A-6F0666D98E10/data/Containers/Data/Application/192A7CAC-FA6E-463B-9E26-2CA9E6841A9A/Documents/Videos/BigBuckBunny.mp4","filename":"BigBuckBunny.mp4","name":"BigBuckBunny"},{"modified":791591931.2680626,"id":"78AE3777-831B-457F-9FD7-25CDE77F7DB2","size":101904873,"extension":"mp4","url":"file:///Users/alizand/Library/Developer/CoreSimulator/Devices/258F4903-3335-4BD3-AB9A-6F0666D98E10/data/Containers/Data/Application/192A7CAC-FA6E-463B-9E26-2CA9E6841A9A/Documents/Videos/output_fixed.mp4","filename":"output_fixed.mp4","name":"output fixed"}]}
[Server] Received 2 local videos from Vision Pro
[Server]   1. BigBuckBunny (150.69 MB)
[Server]   2. output fixed (97.18 MB)
[Server] Received message: {"type":"command","action":"play","targetDevices":["776ADE85-EDEA-4EE1-9D01-7ED54A7448F5"],"videoUrl":"http://192.168.70.131:8080/videos/output_fixed.mp4","videoFormat":"sphere360sbs"}
[Server] Sent play command to Vision Pro
[Server] Received message: {"currentTime":0,"deviceName":"Vision Pro","immersiveMode":true,"type":"status","deviceId":"776ADE85-EDEA-4EE1-9D01-7ED54A7448F5","currentVideo":"http://192.168.70.131:8080/videos/output_fixed.mp4","state":"stopped"}
[Server] Status update from Vision Pro: stopped (time: 0)
[Server] Received message: {"currentTime":0,"deviceName":"Vision Pro","immersiveMode":true,"type":"status","deviceId":"776ADE85-EDEA-4EE1-9D01-7ED54A7448F5","currentVideo":"http://192.168.70.131:8080/videos/output_fixed.mp4","state":"loading"}
[Server] Status update from Vision Pro: loading (time: 0)
[Server] Streaming video: output_fixed.mp4 (0-1/101904873)
[Server] Streaming video: output_fixed.mp4 (0-101904872/101904873)
[Server] Streaming video: output_fixed.mp4 (101842944-101904872/101904873)
[Server] Streaming video: output_fixed.mp4 (16030-101842943/101904873)
[Server] Received message: {"immersiveMode":true,"deviceName":"Vision Pro","state":"playing","type":"status","currentTime":0,"currentVideo":"http://192.168.70.131:8080/videos/output_fixed.mp4","deviceId":"776ADE85-EDEA-4EE1-9D01-7ED54A7448F5"}
[Server] Status update from Vision Pro: playing (time: 0)
[Server] Streaming video: output_fixed.mp4 (0-101904872/101904873)
[Server] Streaming video: output_fixed.mp4 (101875712-101904872/101904873)
[Server] Streaming video: output_fixed.mp4 (131072-101904872/101904873)
[Server] Received message: {"type":"status","immersiveMode":true,"deviceId":"776ADE85-EDEA-4EE1-9D01-7ED54A7448F5","currentVideo":"http://192.168.70.131:8080/videos/output_fixed.mp4","currentTime":0,"deviceName":"Vision Pro","state":"playing"}
[Server] Status update from Vision Pro: playing (time: 0)
[Server] Streaming video: output_fixed.mp4 (0-101904872/101904873)
[Server] Streaming video: output_fixed.mp4 (101875712-101904872/101904873)
[Server] Streaming video: output_fixed.mp4 (131072-101904872/101904873)
[Server] Streaming video: output_fixed.mp4 (31981568-87949311/101904873)
[Server] Streaming video: output_fixed.mp4 (90733880-90767359/101904873)
[Server] Streaming video: output_fixed.mp4 (90767360-101842943/101904873)
[Server] Streaming video: output_fixed.mp4 (16187392-101904872/101904873)
[Server] Streaming video: output_fixed.mp4 (17235968-101904872/101904873)
[Server] Streaming video: output_fixed.mp4 (25362432-98828287/101904873)
[Server] Streaming video: output_fixed.mp4 (26083328-101842943/101904873)
[Server] Streaming video: output_fixed.mp4 (25493504-101842943/101904873)
[Server] Streaming video: output_fixed.mp4 (27459584-101842943/101904873)
[Server] Streaming video: output_fixed.mp4 (31457280-101842943/101904873)
[Server] Streaming video: output_fixed.mp4 (35717120-101842943/101904873)
[Server] Streaming video: output_fixed.mp4 (40173568-101842943/101904873)
[Server] Streaming video: output_fixed.mp4 (45350912-101842943/101904873)
[Server] Streaming video: output_fixed.mp4 (50069504-101842943/101904873)
[Server] Streaming video: output_fixed.mp4 (52428800-101842943/101904873)
[Server] Streaming video: output_fixed.mp4 (54984704-101842943/101904873)
[Server] Received message: {"type":"command","action":"stop","targetDevices":["776ADE85-EDEA-4EE1-9D01-7ED54A7448F5"]}
[Server] Sent stop command to Vision Pro
[Server] Received message: {"currentTime":0,"currentVideo":"http://192.168.70.131:8080/videos/output_fixed.mp4","type":"status","deviceId":"776ADE85-EDEA-4EE1-9D01-7ED54A7448F5","state":"stopped","immersiveMode":true,"deviceName":"Vision Pro"}
[Server] Status update from Vision Pro: stopped (time: 0)
[Server] Connection closed from 192.168.70.131
[Server] Controller disconnected: Web Orchestrator
[Server] New connection from 192.168.70.131
[Server] Received message: {"type":"register","deviceId":"controller-j0s7lg04o","deviceName":"Web Orchestrator","deviceType":"controller"}
[Server] Controller registered: Web Orchestrator
[Server] Video list requested: 4 videos found
[Server] Received message: {"type":"command","action":"play","targetDevices":["776ADE85-EDEA-4EE1-9D01-7ED54A7448F5"],"videoUrl":"file:///Users/alizand/Library/Developer/CoreSimulator/Devices/258F4903-3335-4BD3-AB9A-6F0666D98E10/data/Containers/Data/Application/192A7CAC-FA6E-463B-9E26-2CA9E6841A9A/Documents/Videos/output_fixed.mp4","videoFormat":"hemisphere180sbs"}
[Server] Sent play command to Vision Pro
[Server] Received message: {"state":"stopped","deviceId":"776ADE85-EDEA-4EE1-9D01-7ED54A7448F5","immersiveMode":true,"currentVideo":"file:///Users/alizand/Library/Developer/CoreSimulator/Devices/258F4903-3335-4BD3-AB9A-6F0666D98E10/data/Containers/Data/Application/192A7CAC-FA6E-463B-9E26-2CA9E6841A9A/Documents/Videos/output_fixed.mp4","currentTime":0,"type":"status","deviceName":"Vision Pro"}
[Server] Status update from Vision Pro: stopped (time: 0)
[Server] Received message: {"state":"loading","currentVideo":"file:///Users/alizand/Library/Developer/CoreSimulator/Devices/258F4903-3335-4BD3-AB9A-6F0666D98E10/data/Containers/Data/Application/192A7CAC-FA6E-463B-9E26-2CA9E6841A9A/Documents/Videos/output_fixed.mp4","type":"status","currentTime":0,"deviceId":"776ADE85-EDEA-4EE1-9D01-7ED54A7448F5","immersiveMode":true,"deviceName":"Vision Pro"}
[Server] Status update from Vision Pro: loading (time: 0)
[Server] Received message: {"currentVideo":"file:///Users/alizand/Library/Developer/CoreSimulator/Devices/258F4903-3335-4BD3-AB9A-6F0666D98E10/data/Containers/Data/Application/192A7CAC-FA6E-463B-9E26-2CA9E6841A9A/Documents/Videos/output_fixed.mp4","currentTime":0,"deviceId":"776ADE85-EDEA-4EE1-9D01-7ED54A7448F5","type":"status","immersiveMode":true,"state":"playing","deviceName":"Vision Pro"}
[Server] Status update from Vision Pro: playing (time: 0)
[Server] Received message: {"type":"status","deviceName":"Vision Pro","currentVideo":"file:///Users/alizand/Library/Developer/CoreSimulator/Devices/258F4903-3335-4BD3-AB9A-6F0666D98E10/data/Containers/Data/Application/192A7CAC-FA6E-463B-9E26-2CA9E6841A9A/Documents/Videos/output_fixed.mp4","currentTime":0,"immersiveMode":true,"deviceId":"776ADE85-EDEA-4EE1-9D01-7ED54A7448F5","state":"playing"}
[Server] Status update from Vision Pro: playing (time: 0)
[Server] Received message: {"currentVideo":"file:///Users/alizand/Library/Developer/CoreSimulator/Devices/258F4903-3335-4BD3-AB9A-6F0666D98E10/data/Containers/Data/Application/192A7CAC-FA6E-463B-9E26-2CA9E6841A9A/Documents/Videos/output_fixed.mp4","state":"stopped","immersiveMode":true,"type":"status","deviceId":"776ADE85-EDEA-4EE1-9D01-7ED54A7448F5","deviceName":"Vision Pro","currentTime":14.306}
[Server] Status update from Vision Pro: stopped (time: 14.306)
[Server] Received message: {"type":"command","action":"stop","targetDevices":["776ADE85-EDEA-4EE1-9D01-7ED54A7448F5"]}
[Server] Sent stop command to Vision Pro
[Server] Received message: {"immersiveMode":true,"type":"status","currentTime":0,"deviceName":"Vision Pro","state":"stopped","deviceId":"776ADE85-EDEA-4EE1-9D01-7ED54A7448F5","currentVideo":"file:///Users/alizand/Library/Developer/CoreSimulator/Devices/258F4903-3335-4BD3-AB9A-6F0666D98E10/data/Containers/Data/Application/192A7CAC-FA6E-463B-9E26-2CA9E6841A9A/Documents/Videos/output_fixed.mp4"}
[Server] Status update from Vision Pro: stopped (time: 0)
